# 문제 해결 가이드

## SSH 접속 문제: "Connection closed"

### 증상
```
Connection closed by 54.253.3.176 port 22
```

### 해결 방법

#### 1. 보안 그룹 확인 및 수정

**AWS 콘솔에서:**
1. EC2 콘솔 → **인스턴스** 클릭
2. 인스턴스 선택 → 아래 **보안** 탭 클릭
3. 보안 그룹 이름 클릭 (예: `snapfit-backend-sg`)
4. **인바운드 규칙** 탭 확인

**SSH(22) 규칙 확인:**
- ❌ **문제**: 소스가 "내 IP" 또는 특정 IP로만 설정되어 있음
- ✅ **해결**: SSH(22) 규칙 편집
  - **편집 인바운드 규칙** 클릭
  - SSH(22) 규칙 찾기
  - **소스** 드롭다운 → **어디서나(Anywhere-IPv4)** 선택
  - 또는 **0.0.0.0/0** 직접 입력
  - **규칙 저장** 클릭

**⚠️ 보안 참고:**
- 개발/테스트 단계에서는 모든 IP 허용해도 괜찮습니다
- 운영 환경에서는 나중에 특정 IP만 허용하도록 변경 권장

#### 2. 인스턴스 상태 확인

**EC2 콘솔에서:**
- 인스턴스 상태가 **"실행 중"**인지 확인
- "시작 중"이면 완료될 때까지 대기 (1-2분)

#### 3. 키 파일 권한 확인

**로컬 PC에서:**
```bash
# 키 파일 권한 확인
ls -l snapfit-key.pem

# 권한이 400이 아니면 수정
chmod 400 snapfit-key.pem
```

#### 4. 다시 접속 시도

```bash
ssh -i snapfit-key.pem ec2-user@54.253.3.176
```

---

## 기타 문제

### "Permission denied (publickey)"
- 키 파일 경로가 정확한지 확인
- 키 파일 이름이 정확한지 확인
- 사용자명이 `ec2-user`인지 확인 (Amazon Linux 2023)

### "Connection timed out"
- 보안 그룹에서 SSH(22) 포트가 열려있는지 확인
- 인스턴스가 실행 중인지 확인

### "Host key verification failed"
- 로컬 PC에서 기존 호스트 키 삭제:
```bash
ssh-keygen -R 54.253.3.176
```
